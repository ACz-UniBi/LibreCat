<div class="row innerrow" ng-controller="angularSearch">
  [% external_identifier_list = h.get_list('external_identifier') %]
  <div class="col-md-2">
    {% IF fields.basic_fields.external_id.mandatory OR fields.supplementary_fields.external_id.mandatory %}<span class="starMandatory">{% END %}
    <label for="extId">
      {% fields.basic_fields.external_id.label %}{% fields.supplementary_fields.external_id.label %}
    </label>
    {% IF fields.basic_fields.external_id.mandatory OR fields.supplementary_fields.external_id.mandatory %}*</span>&nbsp;{% END %}{% IF fields.basic_fields.external_id.multiple OR fields.supplementary_fields.external_id.multiple %}<span ng-click="cloneExtid($event)" class="glyphicon glyphicon-plus"{% IF fields.basic_fields.external_id.mandatory OR fields.supplementary_fields.external_id.mandatory %} data-mandatory="yes"{% END %} id="plusExtId"></span>{% END %}
  </div>
  <div class="col-md-10" id="extId">
    {% IF fields.basic_fields.external_id.multiple OR fields.supplementary_fields.external_id.multiple %}
    [% IF !external_id %]
    {% END %}
    <div class="form-group row innerrow">
      <div class="col-md-3">
        <select class="form-control" ng-model="external_id_source_0">
          <option value="">-- Select --</option>
          [% FOREACH extid IN external_identifier_list.keys %]
          <option value="[% extid %]">[% external_identifier_list.$extid.name %]</option>
          [% END %]
        </select>
      </div>
      <div class="col-md-6">
        <input type="text" value="" class="form-control{% IF fields.basic_fields.external_id.mandatory OR fields.supplementary_fields.external_id.mandatory %} required{% END %}" name="external_id.{{external_id_source_0}}" id="external_id_0"{% IF fields.basic_fields.external_id.readonly OR fields.supplementary_fields.external_id.readonly %} readonly="readonly"{% END %} />
      </div><!-- input-group -->
      <div class="col-md-1">
        <div class="glyphicon glyphicon-minus" onclick="javascript:document.getElementById('external_id_0').value = '';"></div>
      </div>
    </div>
    {% IF fields.basic_fields.external_id.multiple OR fields.supplementary_fields.external_id.multiple %}
    [% ELSE %]
      [% FOREACH ext_id IN external_id.keys %]
      <div class="form-group row innerrow">
        <div class="col-md-3">
          <select class="form-control" ng-model="external_id_source_[% loop.index %]" ng-init="external_id_source_[% loop.index %]='[% ext_id %]'">
            <option value="">-- Select --</option>
            [% FOREACH extid IN external_identifier_list.keys %]
            <option value="[% extid %]"[% IF extid == ext_id %] selected="selected"[% END %]>[% external_identifier_list.$extid.name %]</option>
            [% END %]
          </select>
        </div>
        <div class="col-md-6">
          <input type="text" value="[% external_id.$ext_id %]" class="form-control{% IF fields.basic_fields.external_id.mandatory OR fields.supplementary_fields.external_id.mandatory %}[% IF loop.first %] required[% END %]{% END %}" name="external_id.{{external_id_source_[% loop.index %]}}" id="external_id_[% loop.index %]"{% IF fields.basic_fields.external_id.readonly OR fields.supplementary_fields.external_id.readonly %} readonyl="readonly"{% END %} />
        </div><!-- input-group -->
        <div class="col-md-1">
          [% IF loop.index == "0" %]
          <div class="glyphicon glyphicon-minus" onclick="javascript:document.getElementById('external_id_[% loop.index %]').value = '';"></div>
          [% ELSE %]
          <div class="glyphicon glyphicon-minus single"></div>
          [% END %]
        </div>
      </div>
      [% END %]
    [% END %]
    {% END %}
  </div>
</div>
