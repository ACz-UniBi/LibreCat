<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>LibreCat::Hook</title>
  <style type="text/css">code{white-space: pre;}</style>
</head>
<body>
<div id="header">
<h1 class="title">LibreCat::Hook</h1>
<h1 class="subtitle">create call back functions to be executed at important LibreCat events</h1>
</div>
<h1 id="name">NAME</h1>
<p>LibreCat::Hook - create call back functions to be executed at important LibreCat events</p>
<h1 id="synopsis">SYNOPSIS</h1>
<pre><code>    ## In your configuration files
    # catmandu.hooks.yml

    hooks:
       my-event:
         before_fixes:
            - foo
            - bar
         after_fixes:
            - acme

    ## In your perl code;

    # test.pl:
    use Path::Tiny;
    use lib path(__FILE__)-&gt;parent-&gt;parent-&gt;child(&#39;lib&#39;)-&gt;stringify;
    use LibreCat qw(:load);

    my $hook = LibreCat-&gt;hook(&#39;my-event&#39;);

    # This will execute: LibreCat::Hook::foo , LibreCat::Hook::bar
    $hook-&gt;fix_before({ param1 =&gt; ... , param2 =&gt; ... } );

    # do some important code...

    # This will execute: LibreCat::Hook::acme
    $hook-&gt;fix_after({ param1 =&gt; ... , param2 =&gt; ... });</code></pre>
<h1 id="description">DESCRIPTION</h1>
<p>Hooks are ways to extend a LibreCat application. At important points in the application after, before and around named hooks can be defined. Using a configuration file arbitrary code can be executed at those places.</p>
<p>In the example above, in the LibreCat code a 'my-event' hook is defined and fix_before and fix_after method are called before and after some particular event.</p>
<p>When you want to run arbitrary code before or after this event, then a 'hooks' configuration file needs to be created which specifies which code should be executed.</p>
<p>In the catmandu.hooks.yml configuration file for example a 'foo' hook is defined. This is a Perl module in the 'LibreCat::Hook::foo' namespace which implements a 'fix' method:</p>
<pre><code>    package LibreCat::Hook::foo;

    use Moo;

    sub fix {
        my ($self, $data) = @_;

        # .. your code ...
        return $data;
    }

    1;</code></pre>
<p>The fix gets as input all the parameters specified in the main LibreCat application 'test.pl'.</p>
<p>Look at the <code>config/hooks.yml</code> file for example hooks that are defined for the LibreCat web application.</p>
</body>
</html>
